# -*- coding: utf-8 -*-
"""Untitled7.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1-QWos-bqSCXwnOkdiGVlXGhPGm5DgXbV
"""
#
# Install streamlit library

# Then import the library as usual in the script.
import streamlit as st
from Bio import Entrez, SeqIO


# Configurar el correo electrónico para el uso de Entrez
Entrez.email = "a223201128@unison.mx"

# Diccionario que mapea las proteínas con sus IDs en NCBI
proteinas = {
    "insulina": "NP_001278826.1",
    "glucagon": "KAI4036670.1",
    "hemoglobina": "WMZ92120.1",
    "colageno": "BAA04809.1"
}

def obtener_secuencia(proteina_id):
    """Obtiene la secuencia de aminoácidos de una proteína dado su ID en NCBI."""
    try:
        # Descargar datos en formato FASTA desde NCBI
        handle = Entrez.efetch(db="protein", id=proteina_id, rettype="fasta", retmode="text")
        record = SeqIO.read(handle, "fasta")
        handle.close()
        return record.seq
    except Exception as e:
        print(f"Error al obtener la secuencia: {e}")
        return None

def menu_interactivo():
    """Muestra un menú interactivo para que el usuario seleccione una proteína."""
    print("Selecciona una proteína para obtener su secuencia de aminoácidos:")
    for i, proteina in enumerate(proteinas.keys(), start=1):
        print(f"{i}. {proteina.capitalize()}")
    
    # Validar la entrada del usuario
    while True:
        try:
            opcion = int(input("Ingresa el número de tu elección (1-4): "))
            if 1 <= opcion <= 4:
                proteina_seleccionada = list(proteinas.keys())[opcion - 1]
                break
            else:
                print("Por favor, selecciona un número entre 1 y 4.")
        except ValueError:
            print("Entrada no válida. Ingresa un número entre 1 y 4.")
    
    # Obtener la secuencia de la proteína seleccionada
    proteina_id = proteinas[proteina_seleccionada]
    print(f"Obteniendo la secuencia de {proteina_seleccionada.capitalize()}...")
    secuencia = obtener_secuencia(proteina_id)
    
    if secuencia:
        print(f"\nSecuencia de aminoácidos de {proteina_seleccionada.capitalize()}:\n")
        print(secuencia)
    else:
        print("No se pudo obtener la secuencia de aminoácidos.")

# Ejecutar el menú interactivo
if __name__ == "__main__":
    menu_interactivo()



#PROPORCION DE  ATOMOS

import matplotlib.pyplot as plt

# Datos de la proporción de átomos de las proteínas
proteins = {
    "Insulina": {"C": 258, "H": 384, "O": 114, "N": 64, "S": 6},
    "Glucagón": {"C": 153, "H": 225, "O": 49, "N": 40, "S": 2},
    "Hemoglobina": {"C": 2954, "H": 4664, "O": 832, "N": 780, "S": 8},
    "Colágeno": {"C": 1590, "H": 2515, "O": 435, "N": 380, "S": 6},
}

# Función para graficar
def plot_atom_proportion(protein_name, atom_counts):
    atoms = list(atom_counts.keys())
    counts = list(atom_counts.values())
    
    fig, ax = plt.subplots()
    ax.pie(counts, labels=atoms, autopct='%1.1f%%', startangle=90, colors=plt.cm.tab20.colors)
    ax.set_title(f"Proporción de átomos en {protein_name}")
    return fig

# Título
st.title("Proporción de átomos en proteínas")

# Descripción
st.write("Este programa muestra la proporción de átomos en diferentes proteínas. Selecciona una proteína para ver su gráfica.")

# Selección de proteína
selected_protein = st.selectbox("Selecciona una proteína:", list(proteins.keys()))

# Obtener datos de la proteína seleccionada
atom_data = proteins[selected_protein]

# Mostrar los datos en una tabla
st.subheader(f"Datos de {selected_protein}")
st.write(atom_data)

# Generar la gráfica
fig = plot_atom_proportion(selected_protein, atom_data)

# Mostrar la gráfica
st.pyplot(fig)

